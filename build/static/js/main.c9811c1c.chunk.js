(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(30)},28:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),o=a.n(r),i=a(34),l=a(3),s=a(4),u=a(6),h=a(5),m=a(7),d=a(33),p=a(32),v=a(13),f=a.n(v),g=a(14),y=a.n(g),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={query:""},a.updateQuery=function(e){a.setState({query:e.trim()})},a.clearQuery=function(){a.setState({query:""})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.contacts,r=a.onDeleteContact,o=this.state.query;if(o){var i=new RegExp(f()(o),"i");e=n.filter(function(e){return i.test(e.name)})}else e=n;return 0!==e.length&&e.sort(y()("name")),c.a.createElement("div",{className:"list-contacts"},c.a.createElement("div",{className:"list-contacts-top"},c.a.createElement("input",{className:"search-contacts",type:"text",placeholder:"Search contacts",value:o,onChange:function(e){return t.updateQuery(e.target.value)}}),c.a.createElement(p.a,{to:"/create",className:"add-contact"},"Add Contact")),e.length!==n.length&&c.a.createElement("div",{className:"showing-contacts"},c.a.createElement("span",null,"Now showing ",e.length," of ",n.length," total"),c.a.createElement("button",{onClick:this.clearQuery},"Show all")),c.a.createElement("ol",{className:"contact-list"},e.map(function(e){return c.a.createElement("li",{key:e.id,className:"contact-list-item"},c.a.createElement("div",{className:"contact-avatar",style:{backgroundImage:"url(".concat(e.avatarURL,")")}}),c.a.createElement("div",{className:"contact-details"},c.a.createElement("p",null,e.name),c.a.createElement("p",null,e.email)),c.a.createElement("button",{onClick:function(){return r(e)},className:"contact-remove"},"Remove"))})))}}]),t}(n.Component),b=function(e){return new Promise(function(t){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)})},w=function(e,t,a){return new Promise(function(n){var c=new Image;c.onload=function(){var e=t.getContext("2d");c.height>a&&(c.width*=a/c.height,c.height=a),e.clearRect(0,0,t.width,t.height),t.width=c.width,t.height=c.height,e.drawImage(c,0,0,c.width,c.height),n(t.toDataURL("image/jpeg"))},c.src=e})},C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={value:""},a.handleFileChange=function(e){var t=e.target.files[0];t&&t.type.match(/^image\//)?b(t).then(function(e){w(e,a.canvas,a.props.maxHeight).then(function(e){a.setState({value:e})})}):a.setState({value:""})},a.handleFormReset=function(){a.setState({value:""})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.canvas=document.createElement("canvas"),this.fileInput.form.addEventListener("reset",this.handleFormReset)}},{key:"componentWillUnmount",value:function(){this.fileInput.form.removeEventListener("reset",this.handleFormReset)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.name,r=this.state.value,o={position:"relative"};return r&&(o.backgroundImage='url("'.concat(r,'")'),o.backgroundRepeat="no-repeat",o.backgroundPosition="center",o.backgroundSize="cover"),c.a.createElement("div",{className:a,style:o},c.a.createElement("input",{type:"hidden",name:n,value:r}),c.a.createElement("input",{ref:function(t){return e.fileInput=t},type:"file",onChange:this.handleFileChange,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}}))}}]),t}(c.a.Component),j=a(15),k=a.n(j),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).handleSubmit=function(e){e.preventDefault(),console.log(e);var t=k()(e.target,{hash:!0}),n={};n.id=t.name.split(" ")[0].toLowerCase(),n.avatarURL=t.avatarURL,n.name=t.name,n.email=t.email,a.props.onCreateContact&&a.props.onCreateContact(n)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(p.a,{className:"close-create-contact",to:"/"},"Close"),c.a.createElement("form",{onSubmit:this.handleSubmit,className:"create-contact-form"},c.a.createElement(C,{className:"create-contact-avatar-input",name:"avatarURL",maxHeight:64}),c.a.createElement("div",{className:"create-contact-details"},c.a.createElement("input",{type:"text",name:"name",placeholder:"Name"}),c.a.createElement("input",{type:"text",name:"email",placeholder:"Email"}),c.a.createElement("button",null,"Add Contact"))))}}]),t}(n.Component),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={contacts:[]},a.removeContact=function(e){var t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"devyadav"},body:JSON.stringify(e)};console.log(t),fetch("https://contacts-directory-server.herokuapp.com/contacts/"+e.id,t).then(function(e){return e.json()}).then(function(e){return a.setState({contacts:e.contacts})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://contacts-directory-server.herokuapp.com/contacts",{headers:{Authorization:"devyadav"}}).then(function(e){return e.json()}).then(function(t){return e.setState({contacts:t.contacts})})}},{key:"createContact",value:function(e){var t=this,a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"devyadav"},body:JSON.stringify(e)};console.log(a),fetch("https://contacts-directory-server.herokuapp.com/contacts",a).then(function(e){return e.json()}).then(function(e){return t.setState({contacts:e.contacts})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(d.a,{exact:!0,path:"/",render:function(){return c.a.createElement(E,{onDeleteContact:e.removeContact,contacts:e.state.contacts})}}),c.a.createElement(d.a,{path:"/create",render:function(t){var a=t.history;return c.a.createElement(O,{onCreateContact:function(t){e.createContact(t),a.push("/")}})}}))}}]),t}(n.Component);a(28);o.a.render(c.a.createElement(i.a,null,c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("/phone-directory","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}},[[17,2,1]]]);
//# sourceMappingURL=main.c9811c1c.chunk.js.map